{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/global.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction RegisterComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nfunction RegisterComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"h5\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.successMessage);\n  }\n}\nfunction RegisterComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Invalid National ID\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Invalid Phone Number\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r12 = ctx.$implicit;\n    const i_r13 = ctx.index;\n    i0.ɵɵproperty(\"value\", i_r13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r12.roleName);\n  }\n}\nfunction RegisterComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Reqired\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"p\");\n    i0.ɵɵtext(2, \"Invalid Password\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class RegisterComponent {\n  constructor(router, global) {\n    this.router = router;\n    this.global = global;\n    this.successFlag = false;\n    this.successMessage = \"\";\n    this.errorMessage = \"\";\n    this.errorFlag = false;\n    this.submitFlag = false;\n    this.role = {\n      roleName: '',\n      roleId: ''\n    };\n    this.userData = {\n      fName: '',\n      lName: '',\n      userName: '',\n      password: '',\n      phone: '',\n      role: {\n        roleName: '',\n        roleId: ''\n      }\n    };\n    this.registerForm = new FormGroup({\n      fName: new FormControl(\"\", [Validators.required]),\n      lName: new FormControl(\"\", [Validators.required]),\n      userName: new FormControl(\"\", [Validators.required, Validators.pattern(\"^[2 | 3][0-9]{13}$\")]),\n      password: new FormControl(\"\", [Validators.required, Validators.pattern(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[@$!%*?&])[A-Za-z\\\\d@$!%*?&]{8,}$\")]),\n      // rePassword: new FormControl(\"\" , [Validators.required]),\n      phone: new FormControl(\"\", [Validators.required, Validators.pattern(\"^(01)[0 | 1 | 2 | 5][0-9]{8}$\")]),\n      role: new FormControl(\"\", [Validators.required])\n    });\n    this.global.getRoles().subscribe(res => {\n      this.roles = res.data;\n    }, () => {}, () => {});\n  }\n  get Data() {\n    return this.registerForm.controls;\n  }\n  selectedRole(ev) {\n    this.role.roleName = this.roles[ev.target.value].roleName;\n    this.role.roleId = this.roles[ev.target.value]._id;\n  }\n  handleSubmit() {\n    this.submitFlag = true;\n    this.userData = {\n      fName: this.Data.fName.value,\n      lName: this.Data.lName.value,\n      userName: this.Data.userName.value,\n      password: this.Data.password.value,\n      phone: this.Data.phone.value,\n      role: this.role\n    };\n    console.log(this.registerForm.valid);\n    if (this.registerForm.valid) {\n      this.global.register(this.userData).subscribe(res => {\n        this.successFlag = true;\n        this.successMessage = res.message;\n      }, err => {\n        this.errorFlag = true;\n        this.errorMessage = err.error.message;\n      }, () => {});\n    }\n  }\n}\nRegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n  return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.GlobalService));\n};\nRegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: RegisterComponent,\n  selectors: [[\"app-register\"]],\n  decls: 39,\n  vars: 13,\n  consts: [[1, \"vh-100\", \"bg-image\", 2, \"background-image\", \"url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp')\"], [1, \"mask\", \"d-flex\", \"align-items-center\", \"h-100\", \"gradient-custom-3\"], [1, \"container\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col-12\", \"col-md-9\", \"col-lg-7\", \"col-xl-6\"], [1, \"card\", 2, \"border-radius\", \"15px\"], [1, \"card-body\", \"p-5\"], [1, \"text-uppercase\", \"text-center\", \"mb-5\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [1, \"row\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-outline\", \"col-12\", \"col-md-6\", \"col-lg-6\", \"my-2\"], [\"type\", \"text\", \"placeholder\", \"First Name\", \"formControlName\", \"fName\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"Last Name\", \"formControlName\", \"lName\", 1, \"form-control\", \"form-control-lg\"], [1, \"form-outline\", \"my-2\"], [\"type\", \"text\", \"placeholder\", \"National ID\", \"formControlName\", \"userName\", 1, \"form-control\", \"form-control-lg\"], [\"type\", \"text\", \"placeholder\", \"Phone\", \"formControlName\", \"phone\", 1, \"form-control\", \"form-control-lg\"], [\"formControlName\", \"role\", 1, \"form-control\", \"form-control-lg\", 3, \"change\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"form-outline\", \"mb-4\", \"col-12\", \"col-md-6\", \"col-lg-6\", \"my-2\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"formControlName\", \"password\", 1, \"form-control\", \"form-control-lg\"], [1, \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-dark\", \"btn-block\", \"btn-lg\", \"gradient-custom-4\", \"text-success\"], [1, \"alert\", \"alert-danger\"], [1, \"alert\", \"alert-success\"], [3, \"value\"]],\n  template: function RegisterComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"h2\", 7);\n      i0.ɵɵtext(8, \"Create User\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, RegisterComponent_div_9_Template, 3, 1, \"div\", 8);\n      i0.ɵɵtemplate(10, RegisterComponent_div_10_Template, 3, 1, \"div\", 9);\n      i0.ɵɵelementStart(11, \"form\", 10);\n      i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_11_listener() {\n        return ctx.handleSubmit();\n      });\n      i0.ɵɵelementStart(12, \"div\", 11);\n      i0.ɵɵelement(13, \"input\", 12);\n      i0.ɵɵtemplate(14, RegisterComponent_div_14_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 11);\n      i0.ɵɵelement(16, \"input\", 13);\n      i0.ɵɵtemplate(17, RegisterComponent_div_17_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 14);\n      i0.ɵɵelement(19, \"input\", 15);\n      i0.ɵɵtemplate(20, RegisterComponent_div_20_Template, 3, 0, \"div\", 8);\n      i0.ɵɵtemplate(21, RegisterComponent_div_21_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 14);\n      i0.ɵɵelement(23, \"input\", 16);\n      i0.ɵɵtemplate(24, RegisterComponent_div_24_Template, 3, 0, \"div\", 8);\n      i0.ɵɵtemplate(25, RegisterComponent_div_25_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\", 14)(27, \"select\", 17);\n      i0.ɵɵlistener(\"change\", function RegisterComponent_Template_select_change_27_listener($event) {\n        return ctx.selectedRole($event);\n      });\n      i0.ɵɵelementStart(28, \"option\", 18);\n      i0.ɵɵtext(29, \"Select Role\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(30, RegisterComponent_option_30_Template, 2, 2, \"option\", 19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, RegisterComponent_div_31_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"div\", 20);\n      i0.ɵɵelement(33, \"input\", 21);\n      i0.ɵɵtemplate(34, RegisterComponent_div_34_Template, 3, 0, \"div\", 8);\n      i0.ɵɵtemplate(35, RegisterComponent_div_35_Template, 3, 0, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\", 22)(37, \"button\", 23);\n      i0.ɵɵtext(38, \"Add User\");\n      i0.ɵɵelementEnd()()()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorFlag);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.successFlag);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.registerForm);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"fName\"] == null ? null : ctx.Data[\"fName\"].errors == null ? null : ctx.Data[\"fName\"].errors[\"required\"]));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"lName\"] == null ? null : ctx.Data[\"lName\"].errors == null ? null : ctx.Data[\"lName\"].errors[\"required\"]));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"userName\"] == null ? null : ctx.Data[\"userName\"].errors == null ? null : ctx.Data[\"userName\"].errors[\"required\"]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((ctx.Data == null ? null : ctx.Data[\"userName\"] == null ? null : ctx.Data[\"userName\"].dirty) || ctx.submitFlag) && (ctx.Data == null ? null : ctx.Data[\"userName\"] == null ? null : ctx.Data[\"userName\"].errors == null ? null : ctx.Data[\"userName\"].errors[\"pattern\"]));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"phone\"] == null ? null : ctx.Data[\"phone\"].errors == null ? null : ctx.Data[\"phone\"].errors[\"required\"]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((ctx.Data == null ? null : ctx.Data[\"phone\"] == null ? null : ctx.Data[\"phone\"].dirty) || ctx.submitFlag) && (ctx.Data == null ? null : ctx.Data[\"phone\"] == null ? null : ctx.Data[\"phone\"].errors == null ? null : ctx.Data[\"phone\"].errors[\"pattern\"]));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.roles);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"role\"] == null ? null : ctx.Data[\"role\"].errors == null ? null : ctx.Data[\"role\"].errors[\"required\"]));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.submitFlag && (ctx.Data == null ? null : ctx.Data[\"password\"] == null ? null : ctx.Data[\"password\"].errors == null ? null : ctx.Data[\"password\"].errors[\"required\"]));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ((ctx.Data == null ? null : ctx.Data[\"password\"] == null ? null : ctx.Data[\"password\"].dirty) || ctx.submitFlag) && (ctx.Data == null ? null : ctx.Data[\"password\"] == null ? null : ctx.Data[\"password\"].errors == null ? null : ctx.Data[\"password\"].errors[\"pattern\"]));\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","i0","RegisterComponent","constructor","router","global","roleName","roleId","fName","lName","userName","password","phone","role","required","pattern","getRoles","subscribe","res","roles","data","Data","registerForm","controls","selectedRole","ev","target","value","_id","handleSubmit","submitFlag","userData","console","log","valid","register","successFlag","successMessage","message","err","errorFlag","errorMessage","error","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\mosta\\Desktop\\Project\\crm-project-front\\src\\app\\components\\register\\register.component.ts","C:\\Users\\mosta\\Desktop\\Project\\crm-project-front\\src\\app\\components\\register\\register.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { GlobalService } from 'src/app/services/global.service';\r\nimport { FormControl , FormGroup , Validators } from '@angular/forms';\r\nimport { Register } from 'src/app/interfaces/register'; \r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.component.html',\r\n  styleUrls: ['./register.component.css']\r\n})\r\nexport class RegisterComponent {\r\n\r\n\r\n  roles:any\r\n  successFlag = false\r\n  successMessage = \"\"\r\n  errorMessage = \"\"\r\n  errorFlag = false\r\n  submitFlag = false\r\n  role = {\r\n    roleName: '',\r\n    roleId: ''\r\n  }\r\n  roleIndex :any\r\n\r\n  userData:Register={\r\n    fName: '',\r\n    lName: '',\r\n    userName: '',\r\n    password: '',\r\n    phone: '',\r\n    role: {\r\n      roleName:'',\r\n      roleId:''\r\n    }\r\n  }\r\n\r\n\r\n  registerForm = new FormGroup({\r\n    fName: new FormControl(\"\" , [Validators.required]),\r\n    lName: new FormControl(\"\" , [Validators.required]),\r\n    userName: new FormControl(\"\" , [Validators.required , Validators.pattern(\"^[2 | 3][0-9]{13}$\")]), \r\n    password: new FormControl(\"\" , [Validators.required , Validators.pattern(\"^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[@$!%*?&])[A-Za-z\\\\d@$!%*?&]{8,}$\")]),\r\n    // rePassword: new FormControl(\"\" , [Validators.required]),\r\n    phone: new FormControl(\"\" , [Validators.required , Validators.pattern(\"^(01)[0 | 1 | 2 | 5][0-9]{8}$\")]),\r\n    role: new FormControl(\"\" , [Validators.required]),\r\n  })\r\n\r\n  get Data() {return this.registerForm.controls}\r\n\r\n  constructor(private router: Router, private global:GlobalService){\r\n    this.global.getRoles().subscribe((res)=>{\r\n      this.roles = res.data\r\n    } , ()=>{\r\n  \r\n    }, ()=>{\r\n    }\r\n    )\r\n  }\r\n\r\n\r\n  selectedRole(ev:any){\r\n    this.role.roleName = this.roles[ev.target.value].roleName\r\n    this.role.roleId = this.roles[ev.target.value]._id  \r\n  }\r\n\r\n  handleSubmit() {\r\n    this.submitFlag = true;\r\n    \r\n    this.userData = {\r\n      fName: this.Data.fName.value,\r\n      lName: this.Data.lName.value,\r\n      userName: this.Data.userName.value,\r\n      password: this.Data.password.value,\r\n      phone: this.Data.phone.value,\r\n      role: this.role\r\n    }\r\n\r\n    console.log(this.registerForm.valid);\r\n    \r\n    if(this.registerForm.valid){\r\n      this.global.register(this.userData).subscribe((res)=>{\r\n        this.successFlag = true;\r\n        this.successMessage = res.message;\r\n      }, (err)=>{\r\n        this.errorFlag = true;\r\n        this.errorMessage = err.error.message;\r\n        \r\n      }, ()=>{\r\n\r\n      })\r\n    }\r\n    \r\n    \r\n\r\n    \r\n    \r\n  }\r\n\r\n}\r\n","<section class=\"vh-100 bg-image\"\r\n  style=\"background-image: url('https://mdbcdn.b-cdn.net/img/Photos/new-templates/search-box/img4.webp');\">\r\n  <div class=\"mask d-flex align-items-center h-100 gradient-custom-3\">\r\n    <div class=\"container h-100\">\r\n      <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n        <div class=\"col-12 col-md-9 col-lg-7 col-xl-6\">\r\n          <div class=\"card\" style=\"border-radius: 15px;\">\r\n            <div class=\"card-body p-5 \" >\r\n              <h2 class=\"text-uppercase text-center mb-5\">Create User</h2>\r\n\r\n              <div class=\"alert alert-danger\" *ngIf=\"errorFlag\">\r\n                <h5>{{errorMessage}}</h5>\r\n              </div>\r\n\r\n              <div class=\"alert alert-success\" *ngIf=\"successFlag\">\r\n                <h5>{{successMessage}}</h5>\r\n              </div>\r\n\r\n              <form class=\"row\"[formGroup]=\"registerForm\" (ngSubmit)=\"handleSubmit()\">\r\n\r\n                <div class=\"form-outline col-12 col-md-6 col-lg-6 my-2\">\r\n                  <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"First Name\" formControlName=\"fName\"/>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['fName']?.errors?.['required']\"><p>Reqired</p></div>\r\n                </div>\r\n\r\n                <div class=\"form-outline col-12 col-md-6 col-lg-6 my-2\">\r\n                    <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"Last Name\" formControlName=\"lName\"/>\r\n                    <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['lName']?.errors?.['required']\"><p>Reqired</p></div>\r\n                  </div>\r\n\r\n                <div class=\"form-outline my-2\">\r\n                  <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"National ID\" formControlName=\"userName\"/>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['userName']?.errors?.['required']\"><p>Reqired</p></div>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"(Data?.['userName']?.dirty || submitFlag) && Data?.['userName']?.errors?.['pattern']\"><p>Invalid National ID</p></div>\r\n                </div>\r\n\r\n                <div class=\"form-outline my-2\">\r\n                  <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"Phone\" formControlName=\"phone\"/>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['phone']?.errors?.['required']\"><p>Reqired</p></div>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"(Data?.['phone']?.dirty || submitFlag) && Data?.['phone']?.errors?.['pattern']\"><p>Invalid Phone Number</p></div>\r\n                </div>\r\n\r\n                <div class=\"form-outline my-2\">\r\n                    <select class=\"form-control form-control-lg\" (change)=\"selectedRole($event)\" formControlName=\"role\">\r\n                      <option value=\"\" disabled selected>Select Role</option>\r\n                        <option [value]=\"i\" *ngFor=\"let item of roles , let i = index\" >{{item.roleName}}</option>\r\n                      </select>\r\n                      <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['role']?.errors?.['required']\"><p>Reqired</p></div>\r\n                  </div>\r\n\r\n                <div class=\"form-outline mb-4 col-12 col-md-6 col-lg-6 my-2\">\r\n                  <input type=\"password\" class=\"form-control form-control-lg\" placeholder=\"Password\" formControlName=\"password\"/>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"submitFlag && Data?.['password']?.errors?.['required']\"><p>Reqired</p></div>\r\n                  <div class=\"alert alert-danger\" *ngIf=\"(Data?.['password']?.dirty || submitFlag) && Data?.['password']?.errors?.['pattern']\"><p>Invalid Password</p></div>\r\n                </div>\r\n\r\n                <!-- <div class=\"form-outline mb-4 col-12 col-md-6 col-lg-6 my-2\">\r\n                  <input type=\"password\" class=\"form-control form-control-lg\" placeholder=\"Repeat password\" formControlName=\"rePassword\" />\r\n                </div> -->\r\n\r\n                <div class=\"d-flex justify-content-center\">\r\n                  <button type=\"submit\"\r\n                    class=\"btn btn-dark btn-block btn-lg gradient-custom-4 text-success\">Add User</button>\r\n                </div>\r\n\r\n              </form>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}